// Zentrale Konstanten für deutsche Sozialversicherung und Steuern 2025
// Diese Datei ist die einzige Quelle für alle sozialversicherungsrechtlichen Konstanten

/**
 * Beitragsbemessungsgrenzen 2025 (jährlich)
 */
export const BBG_2025_YEARLY = {
  pensionWest: 90600, // €90.600 Renten-/Arbeitslosenversicherung West
  pensionEast: 89400, // €89.400 Renten-/Arbeitslosenversicherung Ost  
  healthCare: 62100,  // €62.100 Kranken-/Pflegeversicherung bundesweit
} as const;

/**
 * Beitragsbemessungsgrenzen 2025 (monatlich)
 */
export const BBG_2025_MONTHLY = {
  pensionWest: 7550, // €7.550 Renten-/Arbeitslosenversicherung West
  pensionEast: 7450, // €7.450 Renten-/Arbeitslosenversicherung Ost
  healthCare: 5175,  // €5.175 Kranken-/Pflegeversicherung bundesweit
} as const;

/**
 * Sozialversicherungsbeiträge 2025 (in Prozent)
 */
export const SOCIAL_INSURANCE_RATES_2025 = {
  pension: {
    total: 18.6,
    employee: 9.3,
    employer: 9.3,
  },
  unemployment: {
    total: 2.6,
    employee: 1.3,
    employer: 1.3,
  },
  health: {
    total: 14.6, // Grundbeitrag ohne Zusatzbeitrag
    employee: 7.3,
    employer: 7.3,
    averageAdditional: 0.85, // Realistischer durchschnittlicher Zusatzbeitrag
  },
  care: {
    total: 3.4,
    employee: 1.7,
    employer: 1.7,
  },
  careChildless: {
    total: 4.0, // Für Kinderlose über 23
    employee: 2.4, // Korrigiert auf realen Satz 2025
    employer: 1.6, // AG-Anteil angepasst
  },
} as const;

/**
 * Minijob-Konstanten
 */
export const MINIJOB_2025 = {
  maxEarnings: 538, // €538 monatlich
  taxRate: 0.02, // 2% Pauschalsteuer
  employerRates: {
    health: 0.13, // 13% Krankenversicherung
    pension: 0.15, // 15% Rentenversicherung  
    total: 0.28, // 28% Gesamtabgaben AG
  },
} as const;

/**
 * Midijob-Konstanten (Übergangsbereich)
 */
export const MIDIJOB_2025 = {
  minEarnings: 538.01,
  maxEarnings: 2000,
  reductionFactor: 0.7, // Vereinfachter Gleitzonenfaktor
} as const;

/**
 * Steuerliche Freibeträge 2025
 */
export const TAX_ALLOWANCES_2025 = {
  basicAllowance: 12096, // Grundfreibetrag
  childAllowance: 6612, // Kinderfreibetrag pro Kind
  workRelatedExpenses: 1230, // Werbungskostenpauschale
  specialExpenses: 36, // Sonderausgabenpauschale
  retirementProvision: 3000, // Max. Vorsorgepauschale
  solidarityTaxFreeAmount: 19950, // Soli-Freibetrag 2025 (Einkommensteuer)
  solidarityReductionLimit: 73483, // Soli-Milderungsgrenze 2025 (zvE)
} as const;

/**
 * Steuersätze und -grenzen 2025
 */
export const TAX_RATES_2025 = {
  progressionZone1: {
    from: 12097,
    to: 17443,
    formula: 'y', // (zvE - 12096) / 10000
    coefficients: [932.30, 1400],
  },
  progressionZone2: {
    from: 17444,
    to: 68480,
    formula: 'z', // (zvE - 17443) / 10000
    coefficients: [176.64, 2397],
    constant: 1015.13,
  },
  proportionalZone1: {
    from: 68481,
    to: 277825,
    rate: 0.42, // 42%
    constant: 10911.92,
  },
  proportionalZone2: {
    from: 277826,
    rate: 0.45, // 45% Reichensteuer
    constant: 19246.67,
  },
  solidarityTax: 0.055, // 5,5%
} as const;

/**
 * Lohnsteuertabelle 2025 (monatlich)
 * Source: Bundesministerium der Finanzen, Lohnsteuertabelle 2025
 * Format: [Bruttolohn, StKl I/IV, StKl II, StKl III, StKl V, StKl VI]
 */
export const WAGE_TAX_TABLE_2025 = [
  [401.99, 0.00, 0.00, 0.00, 29.50, 44.25],
  [410.99, 0.00, 0.00, 0.00, 30.41, 45.25],
  [419.99, 0.00, 0.00, 0.00, 31.41, 46.25],
  [428.99, 0.00, 0.00, 0.00, 32.41, 47.25],
  [437.99, 0.00, 0.00, 0.00, 33.41, 48.16],
  [446.99, 0.00, 0.00, 0.00, 34.41, 49.16],
  [455.99, 0.00, 0.00, 0.00, 35.41, 50.16],
  [464.99, 0.00, 0.00, 0.00, 36.41, 51.16],
  [473.99, 0.00, 0.00, 0.00, 37.41, 52.16],
  [482.99, 0.00, 0.00, 0.00, 38.41, 53.16],
  [491.99, 0.00, 0.00, 0.00, 39.41, 54.16],
  [500.99, 0.00, 0.00, 0.00, 40.33, 55.16],
  [509.99, 0.00, 0.00, 0.00, 41.33, 56.16],
  [518.99, 0.00, 0.00, 0.00, 42.33, 57.16],
  [527.99, 0.00, 0.00, 0.00, 43.33, 58.08],
  [536.99, 0.00, 0.00, 0.00, 44.33, 59.08],
  [545.99, 0.00, 0.00, 0.00, 45.33, 60.08],
  [554.99, 0.00, 0.00, 0.00, 46.33, 61.08],
  [563.99, 0.00, 0.00, 0.00, 47.33, 62.08],
  [572.99, 0.00, 0.00, 0.00, 48.33, 63.08],
  [581.99, 0.00, 0.00, 0.00, 49.33, 64.08],
  [590.99, 0.00, 0.00, 0.00, 50.25, 65.08],
  [599.99, 0.00, 0.00, 0.00, 51.25, 66.08],
  [608.99, 0.00, 0.00, 0.00, 52.25, 67.08],
  [617.99, 0.00, 0.00, 0.00, 53.25, 68.00],
  [626.99, 0.00, 0.00, 0.00, 54.25, 69.00],
  [635.99, 0.00, 0.00, 0.00, 55.25, 70.00],
  [644.99, 0.00, 0.00, 0.00, 56.25, 71.00],
  [653.99, 0.00, 0.00, 0.00, 57.25, 72.00],
  [662.99, 0.00, 0.00, 0.00, 58.25, 73.00],
  [671.99, 0.00, 0.00, 0.00, 59.25, 74.00],
  [680.99, 0.00, 0.00, 0.00, 60.16, 75.00],
  [689.99, 0.00, 0.00, 0.00, 61.16, 76.00],
  [698.99, 0.00, 0.00, 0.00, 62.16, 77.00],
  [707.99, 0.00, 0.00, 0.00, 63.16, 77.91],
  [716.99, 0.00, 0.00, 0.00, 64.16, 78.91],
  [725.99, 0.00, 0.00, 0.00, 65.16, 79.91],
  [734.99, 0.00, 0.00, 0.00, 66.16, 80.91],
  [743.99, 0.00, 0.00, 0.00, 67.16, 81.91],
  [752.99, 0.00, 0.00, 0.00, 68.16, 82.91],
  [761.99, 0.00, 0.00, 0.00, 69.16, 83.91],
  [770.99, 0.00, 0.00, 0.00, 70.08, 84.91],
  [779.99, 0.00, 0.00, 0.00, 71.08, 85.91],
  [788.99, 0.00, 0.00, 0.00, 72.08, 86.91],
  [797.99, 0.00, 0.00, 0.00, 73.08, 87.83],
  [806.99, 0.00, 0.00, 0.00, 74.08, 88.83],
  [815.99, 0.00, 0.00, 0.00, 75.08, 89.83],
  [824.99, 0.00, 0.00, 0.00, 76.08, 90.83],
  [833.99, 0.00, 0.00, 0.00, 77.08, 91.83],
  [842.99, 0.00, 0.00, 0.00, 78.08, 92.83],
  [851.99, 0.00, 0.00, 0.00, 79.08, 93.83],
  [860.99, 0.00, 0.00, 0.00, 80.00, 94.83],
  [869.99, 0.00, 0.00, 0.00, 81.00, 95.83],
  [878.99, 0.00, 0.00, 0.00, 82.00, 96.83],
  [887.99, 0.00, 0.00, 0.00, 83.00, 97.75],
  [896.99, 0.00, 0.00, 0.00, 84.00, 98.75],
  [905.99, 0.00, 0.00, 0.00, 85.00, 99.75],
  [914.99, 0.00, 0.00, 0.00, 86.00, 100.75],
  [923.99, 0.00, 0.00, 0.00, 87.00, 101.75],
  [932.99, 0.00, 0.00, 0.00, 88.00, 102.75],
  [941.99, 0.00, 0.00, 0.00, 89.00, 103.75],
  [950.99, 0.00, 0.00, 0.00, 89.91, 104.75],
  [959.99, 0.00, 0.00, 0.00, 90.91, 105.75],
  [968.99, 0.00, 0.00, 0.00, 91.91, 106.75],
  [977.99, 0.00, 0.00, 0.00, 92.91, 107.66],
  [986.99, 0.00, 0.00, 0.00, 93.91, 108.66],
  [995.99, 0.00, 0.00, 0.00, 94.91, 109.66],
  [1004.99, 0.00, 0.00, 0.00, 95.91, 110.66],
  [1013.99, 0.00, 0.00, 0.00, 96.91, 111.66],
  [1022.99, 0.00, 0.00, 0.00, 97.91, 112.66],
  [1031.99, 0.00, 0.00, 0.00, 98.91, 113.66],
  [1040.99, 0.00, 0.00, 0.00, 99.83, 114.66],
  [1049.99, 0.00, 0.00, 0.00, 100.83, 115.66],
  [1058.99, 0.00, 0.00, 0.00, 101.83, 116.66],
  [1067.99, 0.00, 0.00, 0.00, 102.83, 117.58],
  [1076.99, 0.00, 0.00, 0.00, 103.83, 118.58],
  [1085.99, 0.00, 0.00, 0.00, 104.83, 119.58],
  [1094.99, 0.00, 0.00, 0.00, 105.83, 120.58],
  [1103.99, 0.00, 0.00, 0.00, 106.83, 121.58],
  [1112.99, 0.00, 0.00, 0.00, 107.83, 122.58],
  [1121.99, 0.00, 0.00, 0.00, 108.83, 123.58],
  [1130.99, 0.00, 0.00, 0.00, 109.75, 124.58],
  [1139.99, 0.00, 0.00, 0.00, 110.75, 125.58],
  [1148.99, 0.00, 0.00, 0.00, 111.75, 126.58],
  [1157.99, 0.00, 0.00, 0.00, 112.75, 127.50],
  [1166.99, 0.00, 0.00, 0.00, 113.75, 128.50],
  [1175.99, 0.00, 0.00, 0.00, 114.75, 129.50],
  [1184.99, 0.00, 0.00, 0.00, 115.75, 130.50],
  [1193.99, 0.00, 0.00, 0.00, 116.75, 131.50],
  [1202.99, 0.00, 0.00, 0.00, 117.75, 132.50],
  [1211.99, 0.00, 0.00, 0.00, 118.75, 133.50],
  [1220.99, 0.00, 0.00, 0.00, 119.66, 134.50],
  [1229.99, 0.00, 0.00, 0.00, 120.66, 135.50],
  [1238.99, 0.00, 0.00, 0.00, 121.66, 136.50],
  [1247.99, 0.00, 0.00, 0.00, 122.66, 137.41],
  [1256.99, 0.00, 0.00, 0.00, 123.66, 138.41],
  [1265.99, 0.00, 0.00, 0.00, 124.66, 139.41],
  [1274.99, 0.00, 0.00, 0.00, 125.66, 140.41],
  [1283.99, 0.00, 0.00, 0.00, 126.66, 141.41],
  [1292.99, 0.00, 0.00, 0.00, 127.66, 142.41],
  [1301.99, 0.00, 0.00, 0.00, 128.66, 143.41],
  [1310.99, 0.00, 0.00, 0.00, 129.58, 144.41],
  [1319.99, 0.00, 0.00, 0.00, 130.58, 145.41],
  [1328.99, 0.00, 0.00, 0.00, 131.75, 146.50],
  [1337.99, 0.00, 0.00, 0.00, 132.91, 147.66],
  [1346.99, 0.00, 0.00, 0.00, 134.08, 148.83],
  [1355.99, 0.00, 0.00, 0.00, 135.16, 149.91],
  [1364.99, 0.00, 0.00, 0.00, 136.33, 151.08],
  [1373.99, 0.00, 0.00, 0.00, 137.50, 152.25],
  [1382.99, 0.00, 0.00, 0.00, 138.58, 153.41],
  [1391.99, 0.00, 0.00, 0.00, 139.75, 154.50],
  [1400.99, 0.00, 0.00, 0.00, 140.91, 155.66],
  [1409.99, 0.91, 0.00, 0.00, 142.08, 156.83],
  [1418.99, 2.08, 0.00, 0.00, 143.16, 158.00],
  [1616.99, 30.66, 0.00, 0.00, 181.58, 225.91],
  [1625.99, 32.00, 0.00, 0.00, 184.66, 229.00],
  [1634.99, 33.33, 0.00, 0.00, 187.66, 232.00],
  [1643.99, 34.75, 0.00, 0.00, 190.75, 235.08],
  [1652.99, 36.08, 0.00, 0.00, 193.75, 238.08],
  [1661.99, 37.41, 0.00, 0.00, 196.83, 241.16],
  [1670.99, 38.83, 0.00, 0.00, 199.83, 244.16],
  [1679.99, 40.25, 0.00, 0.00, 202.91, 247.25],
  [1688.99, 41.66, 0.00, 0.00, 206.00, 250.33],
  [1697.99, 43.08, 0.00, 0.00, 209.08, 253.33],
  [1706.99, 44.50, 0.00, 0.00, 212.08, 256.41],
  [1715.99, 46.00, 0.00, 0.00, 215.16, 259.41],
  [1724.99, 47.41, 0.00, 0.00, 218.16, 262.50],
  [1733.99, 48.91, 0.00, 0.00, 221.25, 265.50],
  [1742.99, 50.41, 0.00, 0.00, 224.25, 268.58],
  [1751.99, 51.91, 0.00, 0.00, 227.33, 271.58],
  [1760.99, 53.41, 0.00, 0.00, 230.33, 274.66],
  [1769.99, 54.91, 0.00, 0.00, 233.41, 277.75],
  [1778.99, 56.50, 0.00, 0.00, 236.50, 280.83],
  [1787.99, 58.00, 0.00, 0.00, 239.50, 283.83],
  [1796.99, 59.58, 0.00, 0.00, 242.58, 286.91],
  [1805.99, 61.08, 0.00, 0.00, 245.58, 289.91],
  [1814.99, 62.66, 0.00, 0.00, 248.66, 293.00],
  [1823.99, 64.25, 0.33, 0.00, 251.75, 296.00],
  [1832.99, 65.91, 1.33, 0.00, 254.75, 299.08],
  [1841.99, 67.50, 2.33, 0.00, 257.83, 302.08],
  [1850.99, 69.16, 3.41, 0.00, 260.83, 305.16],
  [1859.99, 70.75, 4.50, 0.00, 263.91, 308.25],
  [1868.99, 72.41, 5.58, 0.00, 267.00, 311.25],
  [1877.99, 74.08, 6.66, 0.00, 270.00, 314.33],
  [1886.99, 75.75, 7.75, 0.00, 273.08, 317.33],
  [1895.99, 77.41, 8.83, 0.00, 276.08, 320.41],
  [1904.99, 79.16, 9.91, 0.00, 279.16, 323.50],
  [1913.99, 80.83, 11.08, 0.00, 282.16, 326.50],
  [1922.99, 82.58, 12.25, 0.00, 285.25, 329.58],
  [1931.99, 84.33, 13.41, 0.00, 288.25, 332.58],
  [1940.99, 86.08, 14.58, 0.00, 291.33, 335.66],
  [1949.99, 87.83, 15.75, 0.00, 294.41, 338.75],
  [1958.99, 89.50, 16.91, 0.00, 297.41, 341.75],
  [1967.99, 91.25, 18.16, 0.00, 300.50, 344.83],
  [1976.99, 93.00, 19.33, 0.00, 303.58, 347.83],
  [1985.99, 94.75, 20.58, 0.00, 306.58, 350.91],
  [1994.99, 96.50, 21.83, 0.00, 309.66, 353.91],
  [2003.99, 98.25, 23.08, 0.00, 312.66, 357.00],
] as const;

/**
 * Kirchensteuersätze nach Bundesländern
 */
export const CHURCH_TAX_RATES_2025 = {
  'BW': { catholic: 8, protestant: 8 }, // Baden-Württemberg
  'BY': { catholic: 8, protestant: 8 }, // Bayern
  'BE': { catholic: 9, protestant: 9 }, // Berlin
  'BB': { catholic: 9, protestant: 9 }, // Brandenburg
  'HB': { catholic: 9, protestant: 9 }, // Bremen
  'HH': { catholic: 9, protestant: 9 }, // Hamburg
  'HE': { catholic: 9, protestant: 9 }, // Hessen
  'MV': { catholic: 9, protestant: 9 }, // Mecklenburg-Vorpommern
  'NI': { catholic: 9, protestant: 9 }, // Niedersachsen
  'NW': { catholic: 9, protestant: 9 }, // Nordrhein-Westfalen
  'RP': { catholic: 9, protestant: 9 }, // Rheinland-Pfalz
  'SL': { catholic: 9, protestant: 9 }, // Saarland
  'SN': { catholic: 9, protestant: 9 }, // Sachsen
  'ST': { catholic: 9, protestant: 9 }, // Sachsen-Anhalt
  'SH': { catholic: 9, protestant: 9 }, // Schleswig-Holstein
  'TH': { catholic: 9, protestant: 9 }, // Thüringen
} as const;

/**
 * Hilfsfunktionen für BBG-Berechnungen
 */
export const getBBGForRegion = (isEastGermany: boolean, type: 'yearly' | 'monthly' = 'monthly') => {
  const bbg = type === 'yearly' ? BBG_2025_YEARLY : BBG_2025_MONTHLY;
  return {
    pension: isEastGermany ? bbg.pensionEast : bbg.pensionWest,
    health: bbg.healthCare,
  };
};

/**
 * Hilfsfunktion für Kirchensteuersatz
 */
export const getChurchTaxRate = (state: string, religion: 'catholic' | 'protestant'): number => {
  return CHURCH_TAX_RATES_2025[state as keyof typeof CHURCH_TAX_RATES_2025]?.[religion] || 9;
};

/**
 * Hilfsfunktion für Pflegeversicherungssatz
 */
export const getCareInsuranceRate = (isChildless: boolean, age: number) => {
  return (isChildless && age > 23) ? SOCIAL_INSURANCE_RATES_2025.careChildless : SOCIAL_INSURANCE_RATES_2025.care;
};